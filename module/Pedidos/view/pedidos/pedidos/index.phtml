<?php

declare(strict_types=1);

use Laminas\Form\Form;
use Laminas\View\Renderer\PhpRenderer;
use Pedidos\Constantes\ConstantesPedidos;
use Pedidos\Model\Pedidos;

/**
 * @var PhpRenderer $this
 * @var Form|null $form
 * @var Pedidos|null $pedido
 * @var array<string, mixed> $pedidos
 * @var string|null $searchTerm
 * @var string $action
 * @var int|null $id
 *
 * @method string formEditPedidos(?Form $form, string $titulo, string $rota, ?int $id = null)
 * @method string formAddPedidos(?Form $form, string $titulo, string $rota)
 * @method string formDeletePedidos(string $titulo, string $rota, int $id, string $descricao)
 * @method string barraPesquisa()
 * @method string tabelaPedidos(array $pedidos)
 * @method string mensagensAlert(array $pedidos, ?string $searchTerm = null)
 */

if ($this->action === 'edit') {
    echo $this->formEditPedidos(
        $this->form,
        'Editar Pedido',
        ConstantesPedidos::ROUTE,
        $this->id
    );
} elseif ($this->action === 'add') {
    echo $this->formAddPedidos(
        $this->form,
        'Adicionar Pedido',
        ConstantesPedidos::ROUTE
    );
} elseif ($this->action === 'delete' && $this->pedido) {
    echo $this->formDeletePedidos(
        'Excluir Pedido',
        ConstantesPedidos::ROUTE,
        $this->pedido->getId(),
        sprintf('o pedido "%s"', $this->pedido->getNome())
    );
} else {
    $pedidos = $this->pedidos;
    $searchTerm = $this->searchTerm;

    $this->headTitle('Pedidos');

    echo '<h1 class="mb-4">Pedidos</h1>';

    echo $this->barraPesquisa();

    echo $this->tabelaPedidos($pedidos);

    echo $this->mensagensAlert($pedidos, $searchTerm);
}
